<div class="loader" *ngIf="isLoader"></div>
<div class="container-fluid">
  <nb-card>
    <nb-card-header class="aditi-header">
      <div class="back-link">
        <a class="m-lg-n3" (click)="previousPage()" aria-label="back">
          <nb-icon icon="arrow-back" title="voltar"></nb-icon>
        </a>
      </div>
      <h5>Detalhes do Atendimento</h5>
    </nb-card-header>
    <nb-card-body>
      <div class="form-row align-items-center">
        <div class="form-group col-md-6 ">
          <div class="form-group">
            <div class="form-row">
              <div class="mr-2"><label>Nome do Médico: </label></div>
              <label>{{ paciente.medico }} </label>
          </div>
            <div class="form-row">
                <div class="mr-2"><label>Data do Atendimento: </label></div>
                <label>{{ paciente.data }} {{ paciente.horario }}</label>
            </div>
            <div class="form-row">
                <div class="mr-2"><label>Nome do Paciente: </label></div>
                <label>{{ paciente.nomePaciente }}</label>
            </div>
            <div class="form-row">
                <div class="mr-2"><label>Nome da Mãe: </label></div>
                <label>{{ paciente.nameMother }}</label>
            </div>
            <div class="form-row">
                <div class="mr-2"><label>Nome do Pai: </label></div>
                <label>{{ paciente.nameFather }}</label>
            </div>
        </div>
        
        </div>
        <div class="form-group col-md-6 ">
          <div class="form-group ">
            <div class="form-row">
              <div class="mr-2"><label>Forma Pagamento: </label></div>
              <label>{{paciente.formaPagamento}} </label>
            </div>
            <div class="form-row">
              <div class="mr-2"><label>Modalidade: </label></div>
              <label>{{paciente.modalidade}} </label>
            </div>
            <div class="form-row">
              <div class="mr-2"><label>Situação: </label></div>
              <label>{{paciente.status}} </label>
            </div>   
            <div class="form-row">
              <div class="mr-2"><label>Telefone Paciente: </label></div>
              <label>{{paciente.telefone}} </label>
            </div> 
            <div class="form-row">
              <div class="mr-2"><label>Email Paciente: </label></div>
              <label>{{paciente.email}} </label>
            </div>      
          </div>
        </div>
      </div>
    </nb-card-body>
  </nb-card>
  <nb-card class="custom-card">
    <nb-card-body>
      <div class="card-actions">
        <button *ngIf="atendimento.status === '01 - Aguardando Aprovação' || atendimento.status === '03 - Consulta Confirmada' || atendimento.status === '02 - Aguardando Pagamento'" (click)="abrirModalCancelamento()" class="action-button">
          <nb-icon class="action-icon" icon="trash-2-outline"></nb-icon>
          <span>Cancelar</span>
        </button>
        <button *ngIf="atendimento.status === '01 - Aguardando Aprovação' || atendimento.status === '02 - Aguardando Pagamento'" (click)="aprovarPagamento()" class="action-button">
          <nb-icon class="action-icon" icon="checkmark-circle-outline"></nb-icon>
          <span>Aprovar Pagamento</span>
        </button>
        <button *ngIf="atendimento.status === '03 - Consulta Confirmada' && atendimento.modalidade === 'Consulta por Video Chamada' && atendimento.urlCall !== null" (click)="goToLink(atendimento.urlCall)" class="action-button">
          <nb-icon class="action-icon" icon="wifi-outline"></nb-icon>
          <span>Atender</span>
        </button>
        <button *ngIf="atendimento.status === '03 - Consulta Confirmada' || atendimento.status === '02 - Aguardando Pagamento'" (click)="editarConsulta(atendimento.urlCall)" class="action-button">
          <nb-icon class="action-icon" icon="edit-outline"></nb-icon>
          <span>Reagendar</span>
        </button>
        <button *ngIf="(atendimento.status === '01 - Aguardando Aprovação' || atendimento.status === '03 - Consulta Confirmada' || atendimento.status === '02 - Aguardando Pagamento') && atendimento.formaPagamento === 'PIX'" (click)="abrirComprovante()" class="action-button">
          <nb-icon class="action-icon" icon="attach-outline"></nb-icon>
          <span>Ver Comprovante</span>
        </button>
        <button *ngIf="atendimento.status === '03 - Consulta Confirmada' || atendimento.status === '04 - Consulta Finalizada'" (click)="abrirConsulta()" class="action-button">
          <nb-icon class="action-icon" icon="file-outline"></nb-icon>
          <span>Atualizar Prontuário</span>
        </button>
      </div>
    </nb-card-body>
  </nb-card>
  
</div>
